{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/share-social/webpack/bootstrap","webpack://@fof/share-social/webpack/runtime/compat get default export","webpack://@fof/share-social/webpack/runtime/define property getters","webpack://@fof/share-social/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/share-social/webpack/runtime/make namespace object","webpack://@fof/share-social/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/share-social/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/share-social/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/utils/string']\"","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@fof/share-social/./node_modules/escape-goat/index.js","webpack://@fof/share-social/./node_modules/pupa/index.js","webpack://@fof/share-social/./src/forum/components/ShareModal.js","webpack://@fof/share-social/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/string'];","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","const _htmlEscape = string => string\n\t.replace(/&/g, '&amp;')\n\t.replace(/\"/g, '&quot;')\n\t.replace(/'/g, '&#39;')\n\t.replace(/</g, '&lt;')\n\t.replace(/>/g, '&gt;');\n\nconst _htmlUnescape = htmlString => htmlString\n\t.replace(/&gt;/g, '>')\n\t.replace(/&lt;/g, '<')\n\t.replace(/&#0?39;/g, '\\'')\n\t.replace(/&quot;/g, '\"')\n\t.replace(/&amp;/g, '&');\n\nexport function htmlEscape(strings, ...values) {\n\tif (typeof strings === 'string') {\n\t\treturn _htmlEscape(strings);\n\t}\n\n\tlet output = strings[0];\n\tfor (const [index, value] of values.entries()) {\n\t\toutput = output + _htmlEscape(String(value)) + strings[index + 1];\n\t}\n\n\treturn output;\n}\n\nexport function htmlUnescape(strings, ...values) {\n\tif (typeof strings === 'string') {\n\t\treturn _htmlUnescape(strings);\n\t}\n\n\tlet output = strings[0];\n\tfor (const [index, value] of values.entries()) {\n\t\toutput = output + _htmlUnescape(String(value)) + strings[index + 1];\n\t}\n\n\treturn output;\n}\n","import {htmlEscape} from 'escape-goat';\n\nexport class MissingValueError extends Error {\n\tconstructor(key) {\n\t\tsuper(`Missing a value for ${key ? `the placeholder: ${key}` : 'a placeholder'}`, key);\n\t\tthis.name = 'MissingValueError';\n\t\tthis.key = key;\n\t}\n}\n\nexport default function pupa(template, data, {ignoreMissing = false, transform = ({value}) => value} = {}) {\n\tif (typeof template !== 'string') {\n\t\tthrow new TypeError(`Expected a \\`string\\` in the first argument, got \\`${typeof template}\\``);\n\t}\n\n\tif (typeof data !== 'object') {\n\t\tthrow new TypeError(`Expected an \\`object\\` or \\`Array\\` in the second argument, got \\`${typeof data}\\``);\n\t}\n\n\tconst replace = (placeholder, key) => {\n\t\tlet value = data;\n\t\tfor (const property of key.split('.')) {\n\t\t\tvalue = value ? value[property] : undefined;\n\t\t}\n\n\t\tconst transformedValue = transform({value, key});\n\t\tif (transformedValue === undefined) {\n\t\t\tif (ignoreMissing) {\n\t\t\t\treturn placeholder;\n\t\t\t}\n\n\t\t\tthrow new MissingValueError(key);\n\t\t}\n\n\t\treturn String(transformedValue);\n\t};\n\n\tconst composeHtmlEscape = replacer => (...args) => htmlEscape(replacer(...args));\n\n\t// The regex tries to match either a number inside `{{ }}` or a valid JS identifier or key path.\n\tconst doubleBraceRegex = /{{(\\d+|[a-z$_][\\w\\-$]*?(?:\\.[\\w\\-$]*?)*?)}}/gi;\n\n\tif (doubleBraceRegex.test(template)) {\n\t\ttemplate = template.replace(doubleBraceRegex, composeHtmlEscape(replace));\n\t}\n\n\tconst braceRegex = /{(\\d+|[a-z$_][\\w\\-$]*?(?:\\.[\\w\\-$]*?)*?)}/gi;\n\n\treturn template.replace(braceRegex, replace);\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport { truncate, getPlainContent } from 'flarum/common/utils/string';\n\nimport pupa from 'pupa';\n\nconst navigatorData = ({ title, description, url }) => ({ title, text: description, url });\n\nconst share = {\n  facebook: '//facebook.com/sharer/sharer.php?u={url}',\n  twitter: '//twitter.com/share?url={url}&text={title}',\n  linkedin: '//linkedin.com/shareArticle?mini=true&url={url}&title={title}&summary={description}',\n  reddit: '//www.reddit.com/submit?url={url}&title={title}',\n  whatsapp: '//api.whatsapp.com/send/?phone&text={title}%20{url}',\n  telegram: '//telegram.me/share/url?url={url}&text={title}',\n\n  vkontakte: '//vk.com/share.php?url={url}&title={title}&description={description}',\n  odnoklassniki: '//connect.ok.ru/offer?url={url}',\n  my_mail: '//connect.mail.ru/share?url={url}&title={title}&description={description}',\n  qq: '//connect.qq.com/widget/shareqq/iframe_index.html?url={url}&title={title}',\n  qzone: '//sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}&summary={description}&title={title}',\n\n  native: (data) => navigator.share(navigatorData(data)),\n};\n\nconst shareIcons = {\n  vkontakte: 'fab fa-vk',\n  my_mail: 'fas fa-at',\n  qq: 'fab fa-qq',\n  qzone: 'fas fa-star',\n  native: 'fas fa-share-square',\n};\n\nexport default class ShareModal extends Modal {\n  oninit(vdom) {\n    super.oninit(vdom);\n\n    this.networks = this.attrs.networks;\n    this.discussion = this.attrs.discussion;\n  }\n\n  className() {\n    return 'FofShareSocialModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('fof-share-social.forum.modal.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            {this.networks\n              .filter((name) => name !== 'native' || navigator.canShare?.(navigatorData(this.data())))\n              .map((network) => (\n                <Button\n                  className={`Button Button--rounded Button--block Share--${network}`}\n                  icon={`${shareIcons[network] || `fab fa-${network}`} fa-lg fa-fw`}\n                  onclick={this.onclick.bind(this, network)}\n                >\n                  {app.translator.trans(`fof-share-social.lib.networks.${network}`)}\n                </Button>\n              ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onclick(network) {\n    const data = this.data();\n    const action = share[network];\n\n    if (typeof action === 'function') {\n      return action(data);\n    }\n\n    const width = 1000;\n    const height = 500;\n    const top = $(window).height() / 2 - height / 2;\n    const left = $(window).width() / 2 - width / 2;\n    const windowParams = `width=${width}, height= ${height}, top=${top}, left=${left}, status=no, scrollbars=no, resizable=no`;\n\n    for (const dataKey in data) {\n      data[dataKey] = encodeURIComponent(data[dataKey]);\n    }\n\n    window.open(pupa(action, data), app.title, windowParams);\n  }\n\n  data() {\n    const url = this.discussion.shareUrl();\n    const title = app.title;\n    const description = (this.discussion.firstPost() && truncate(getPlainContent(this.discussion.firstPost()?.contentHtml()), 150, 0)) || '';\n\n    return { url, title, description };\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport Button from 'flarum/common/components/Button';\nimport Model from 'flarum/common/Model';\nimport Discussion from 'flarum/common/models/Discussion';\n\nimport ShareModal from './components/ShareModal';\n\napp.initializers.add('fof/share-social', () => {\n  Discussion.prototype.shareUrl = Model.attribute('shareUrl');\n\n  extend(DiscussionPage.prototype, 'sidebarItems', function (items) {\n    const networks = app.forum.attribute('fof-share-social.networks');\n\n    if (networks.length) {\n      items.add(\n        'share-social',\n        <Button\n          class=\"Button Button-icon Button--share\"\n          icon=\"fas fa-share-alt\"\n          onclick={() =>\n            app.modal.show(ShareModal, {\n              networks,\n              discussion: this.discussion,\n            })\n          }\n        >\n          {app.translator.trans('fof-share-social.forum.discussion.share_button')}\n        </Button>,\n        -1\n      );\n    }\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","_getPrototypeOf","getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_construct","Parent","args","Class","isNativeReflectConstruct","push","apply","instance","Function","bind","arguments","_wrapNativeSuper","_cache","Map","undefined","fn","toString","indexOf","TypeError","has","set","Wrapper","this","writable","configurable","_htmlEscape","string","replace","htmlEscape","strings","output","values","entries","index","String","MissingValueError","name","Error","navigatorData","title","text","description","url","share","facebook","twitter","linkedin","reddit","whatsapp","telegram","vkontakte","odnoklassniki","my_mail","qq","qzone","native","data","navigator","shareIcons","ShareModal","oninit","vdom","networks","attrs","discussion","className","app","content","filter","canShare","map","network","icon","onclick","action","windowParams","$","window","height","width","dataKey","encodeURIComponent","open","template","ignoreMissing","transform","replacer","placeholder","split","property","transformedValue","doubleBraceRegex","test","pupa","shareUrl","firstPost","truncate","getPlainContent","contentHtml","Modal","Discussion","Model","extend","DiscussionPage","items","length","add","class"],"sourceRoot":""}